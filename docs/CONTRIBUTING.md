# Contribution Guidelines

First of all, thank you very much for taking the time to contribute to
the **keyed** project!

This document provides guidelines for contributing to keyed—its codebase
and documentation. These guidelines are meant to guide you, not to
restrict you. If in doubt, use your best judgment and feel free to
propose improvements through an issue or pull request.

#### Table Of Contents

- [Code of Conduct](#code-of-conduct)
- [Installation](#installation)
  - [Obtaining the source](#obtaining-the-source)
  - [Setting up your R environment](#setting-up-your-r-environment)
  - [Installing from source](#installing-from-source)
- [Testing](#testing)
- [Documentation](#documentation)
  - [Install dependencies](#install-dependencies)
  - [Building the documentation](#building-the-documentation)
  - [Design of the docs](#design-of-the-docs)
- [Project organization](#project-organization)
- [Contributing workflow](#contributing-workflow)
- [Style guidelines](#style-guidelines)
- [Pull request checklist](#pull-request-checklist)
- [Reporting bugs](#reporting-bugs)

## Code of Conduct

This project and everyone participating in it is governed by our **Code
of Conduct** (`CODE_OF_CONDUCT.md`). By participating, you are expected
to uphold this code and maintain a respectful, inclusive environment.

## Installation

This installation guide is focused on development. For regular
installation, please see the
[README](https://gcol33.github.io/keyed/README.md).

### Obtaining the source

Clone the keyed repository:

``` bash
git clone https://github.com/gcol33/keyed.git
cd keyed
```

If you work on a development branch:

``` bash
git checkout dev
git pull origin dev
```

### Setting up your R environment

keyed is a pure R package with no compiled code.

1.  **Install required tools**

    - R (≥ 4.1)
    - Git
    - An editor or IDE (RStudio, VS Code, etc.)

2.  **Install development dependencies**

    ``` r

    install.packages(c("devtools", "roxygen2", "testthat", "rmarkdown", "knitr", "pkgdown"))
    ```

3.  **Load the development build**

    ``` r

    devtools::load_all()
    ```

### Installing from source

Build and install the package locally:

``` r

devtools::install()
```

Regenerate documentation with:

``` r

devtools::document()
```

## Testing

keyed uses **testthat** for testing. All tests are located in
`tests/testthat/`.

Run the full test suite:

``` r

devtools::test()
```

Run a complete package check:

``` r

devtools::check()
```

Run a subset of tests during development:

``` r

testthat::test_dir("tests/testthat")
testthat::test_file("tests/testthat/test-key.R")
```

Guidelines: - Keep tests fast and reproducible. - Use
[`set.seed()`](https://rdrr.io/r/base/Random.html) for random data. -
Include edge cases and expected failures. - Prefer small examples to
large datasets.

## Documentation

### Install dependencies

``` r

install.packages(c("rmarkdown", "knitr", "pkgdown"))
```

### Building the documentation

Build vignettes:

``` r

devtools::build_vignettes()
```

Build the pkgdown site locally:

``` r

pkgdown::build_site()
```

The generated site is saved in the `docs/` directory. Open
`docs/index.html` in your browser to view it.

### Design of the docs

- Function documentation: `man/` (generated by roxygen2)
- Tutorials and examples: `vignettes/`
- Website configuration: `_pkgdown.yml`
- Package overview: `README.md`
- Changelog: `NEWS.md`

## Project organization

    keyed/
    ├── .github/                <- Continuous integration workflows
    ├── .gitignore
    ├── .Rbuildignore
    ├── keyed.Rproj
    ├── DESCRIPTION             <- Package metadata
    ├── NAMESPACE               <- Function exports and imports
    ├── LICENSE
    ├── LICENSE.md
    ├── NEWS.md
    ├── README.md
    ├── _pkgdown.yml
    ├── R/                      <- R source files
    ├── man/                    <- Generated documentation
    ├── vignettes/              <- Long-form documentation and usage examples
    ├── tests/
    │   └── testthat/           <- Unit tests
    ├── docs/                   <- pkgdown website (generated)
    ├── doc/                    <- Built vignettes for local preview (ignored in Git)
    └── keyed.Rcheck/           <- Artifacts from local package checks (ignored)

## Contributing workflow

1.  **Create a feature branch**

    ``` bash
    git checkout -b feature/my-feature
    ```

2.  **Make focused commits** with clear messages.

3.  **Run tests and checks** before committing:

    ``` r

    devtools::test()
    devtools::check()
    ```

4.  **Update documentation** with `roxygen2` and `NEWS.md`.

5.  **Update vignettes/examples** if user-facing behavior changes.

6.  **Open a pull request** with a short description of your change.

7.  **Respond to review feedback** constructively.

## Style guidelines

### R code

- Use descriptive names and consistent indentation.
- Prefer vectorized operations over loops.
- Validate inputs early with clear error messages.
- Document all exported functions with roxygen2.

### Tests

- Add or update tests when functionality changes.
- Keep tests minimal and reproducible.
- Avoid external dependencies unless essential.

## Pull request checklist

Tests pass
([`devtools::test()`](https://devtools.r-lib.org/reference/test.html)
and
[`devtools::check()`](https://devtools.r-lib.org/reference/check.html))

Documentation updated (roxygen + `NEWS.md`)

Vignettes/examples updated if needed

No unrelated formatting changes

PR description clearly explains the change

## Reporting bugs

When reporting an issue, please include: - A minimal reproducible
example (`reprex`) - Output of
[`sessionInfo()`](https://rdrr.io/r/utils/sessionInfo.html) - Expected
vs. actual results - R and operating system version

------------------------------------------------------------------------

By contributing to keyed, you agree that your code is released under the
same license as the package.
